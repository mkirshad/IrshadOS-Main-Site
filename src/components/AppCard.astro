---
import type { App } from "../lib/catalog";
import Badge from "./Badge.astro";

type Props = {
  app: App;
};

const { app } = Astro.props;
---

<a
  href={`/apps/${app.slug}`}
  class="group no-underline rounded-2xl border border-ink-100 bg-white p-5 shadow-sm transition hover:-translate-y-0.5 hover:border-ink-200 hover:shadow-md"
>
  <div class="flex items-start gap-4">
    <div class="grid size-12 shrink-0 place-items-center overflow-hidden rounded-xl bg-ink-50 ring-1 ring-inset ring-ink-100">
      {app.icon ? (
        <img src={app.icon} alt="" class="h-full w-full object-cover" loading="lazy" />
      ) : (
        <span class="text-sm font-semibold text-ink-700" aria-hidden="true">
          {app.name.slice(0, 2).toUpperCase()}
        </span>
      )}
    </div>

    <div class="min-w-0 flex-1">
      <div class="flex flex-wrap items-center justify-between gap-2">
        <h3 class="truncate text-base font-semibold text-ink-900 group-hover:text-ink-950">
          {app.name}
        </h3>
        <Badge variant={app.status === "live" ? "success" : "warning"}>
          {app.status === "live" ? "Live" : "Coming soon"}
        </Badge>
      </div>
      <p class="mt-2 line-clamp-2 text-sm text-ink-600">{app.short_description}</p>
      {app.tags.length > 0 && (
        <div class="mt-3 flex flex-wrap gap-2">
          {app.tags.slice(0, 4).map((t) => (
            <span class="rounded-full bg-ink-50 px-2 py-0.5 text-xs font-medium text-ink-700">
              {t}
            </span>
          ))}
        </div>
      )}
    </div>
  </div>
</a>

